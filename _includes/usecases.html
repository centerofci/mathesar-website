<section class="bg-stone-50 py-20">
  <div class="space-y-8">
    <div class="text-center space-y-2">
      <h3 class="text-4xl font-bold">Use Cases</h3>
      <p class="text-xl">
        Here's what you could set up in your first
        <span class="font-semibold">30 mins</span> of using Mathesar:
      </p>
    </div>
    <div class="w-40 border-t-2 border-stone-200 mx-auto"></div>
    <div
      class="lg:flex lg:justify-center lg:px-20 lg:space-x-8 px-4 mx-auto space-y-2 lg:space-y-0"
    >
      <div
        class="lg:w-80 shrink-0 gap-1 lg:space-y-1 flex lg:block flex-wrap justify-center"
      >
        {% for item in site.data.use_cases[page.title] %}
        <button
          class="use-case-button p-2 lg:text-lg lg:block lg:w-full rounded-lg text-left hover:bg-stone-100"
          onclick="updateScreenshot('{{item.image}}')"
        >
          {{item.use_case}}
        </button>

        {% if item.description %}
        <div class="use-case-description hidden">{{item.description}}</div>
        {% endif %} {% endfor %}
      </div>

      <div
        class="bg-gray-800 p-8 max-w-6xl rounded-lg shadow-lg flex flex-col justify-center"
      >
        <img
          class="rounded-lg shadow-lg screenshot"
          src="assets/{{site.data.use_cases[page.title][0].image}}"
          alt=""
        />
      </div>
    </div>
  </div>
</section>

<script>
  window.addEventListener("load", function () {
    var buttons = document.querySelectorAll(".use-case-button");
    if (buttons.length > 0) {
      buttons[0].classList.add("bg-stone-200", "font-semibold");
      var activeDescription = buttons[0].nextElementSibling;
      if (activeDescription) {
        activeDescription.classList.remove("hidden");
      }
    }
  });

  function updateScreenshot(imageUrl) {
    var buttons = document.querySelectorAll(".use-case-button");
    for (var i = 0; i < buttons.length; i++) {
      buttons[i].classList.remove("bg-stone-200", "font-semibold");
      var description = buttons[i].nextElementSibling;
      if (description) {
        description.classList.add("hidden");
      }
    }

    var button = event.target.closest(".use-case-button");
    if (button) {
      button.classList.add("bg-stone-200", "font-semibold");
      document.querySelector(".screenshot").src = "assets/" + imageUrl;

      var activeDescription = button.nextElementSibling;
      if (activeDescription) {
        activeDescription.classList.remove("hidden");
      }
    }
  }
</script>
